{"ast":null,"code":"import { CommonModule } from '@angular/common';\nimport { RouterLink } from '@angular/router';\nimport { HeaderComponent } from '../header/header.component';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"../services/song.service\";\nimport * as i3 from \"../services/theme.service\";\nimport * as i4 from \"@angular/common\";\nfunction MoodComponent_div_15_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 14);\n    i0.ɵɵlistener(\"click\", function MoodComponent_div_15_Template_div_click_0_listener() {\n      const song_r2 = i0.ɵɵrestoreView(_r1).$implicit;\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.playSong(song_r2));\n    });\n    i0.ɵɵelementStart(1, \"div\", 15);\n    i0.ɵɵelement(2, \"img\", 16);\n    i0.ɵɵelementStart(3, \"div\", 17);\n    i0.ɵɵtext(4, \"\\u25B6\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(5, \"div\", 18)(6, \"h3\");\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"p\");\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const song_r2 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"src\", song_r2.cover, i0.ɵɵsanitizeUrl)(\"alt\", song_r2.title);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(song_r2.title);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(song_r2.artist);\n  }\n}\nfunction MoodComponent_p_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\");\n    i0.ɵɵtext(1, \"No songs found for this mood. Add some in the admin panel!\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction MoodComponent_div_17_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 19)(1, \"div\", 20);\n    i0.ɵɵelement(2, \"img\", 21);\n    i0.ɵɵelementStart(3, \"div\", 22)(4, \"h4\");\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"p\");\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(8, \"div\", 23)(9, \"div\", 24)(10, \"button\", 25);\n    i0.ɵɵlistener(\"click\", function MoodComponent_div_17_Template_button_click_10_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.previousSong());\n    });\n    i0.ɵɵtext(11, \"\\u23EE\\uFE0F\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"button\", 26);\n    i0.ɵɵlistener(\"click\", function MoodComponent_div_17_Template_button_click_12_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.togglePlay());\n    });\n    i0.ɵɵtext(13);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"button\", 25);\n    i0.ɵɵlistener(\"click\", function MoodComponent_div_17_Template_button_click_14_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.nextSong());\n    });\n    i0.ɵɵtext(15, \"\\u23ED\\uFE0F\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(16, \"div\", 27)(17, \"span\", 28);\n    i0.ɵɵtext(18);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(19, \"input\", 29);\n    i0.ɵɵlistener(\"input\", function MoodComponent_div_17_Template_input_input_19_listener($event) {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.seek($event));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(20, \"span\", 28);\n    i0.ɵɵtext(21);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(22, \"div\", 30)(23, \"button\", 31);\n    i0.ɵɵlistener(\"click\", function MoodComponent_div_17_Template_button_click_23_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.toggleMute());\n    });\n    i0.ɵɵtext(24);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"src\", ctx_r2.currentSong.cover, i0.ɵɵsanitizeUrl)(\"alt\", ctx_r2.currentSong.title);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(ctx_r2.currentSong.title);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r2.currentSong.artist);\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate(ctx_r2.isPlaying ? \"\\u23F8\" : \"\\u25B6\");\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(ctx_r2.formatTime(ctx_r2.currentTime));\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"max\", ctx_r2.duration || 100)(\"value\", ctx_r2.currentTime);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r2.formatTime(ctx_r2.duration));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(ctx_r2.isMuted ? \"\\uD83D\\uDD07\" : \"\\uD83D\\uDD0A\");\n  }\n}\nexport let MoodComponent = /*#__PURE__*/(() => {\n  class MoodComponent {\n    route;\n    router;\n    songService;\n    themeService;\n    emotion = 'happy';\n    songs = [];\n    currentSongIndex = 0;\n    currentSong = null;\n    audio = null;\n    isPlaying = false;\n    isMuted = false;\n    currentTime = 0;\n    duration = 0;\n    constructor(route, router, songService, themeService) {\n      this.route = route;\n      this.router = router;\n      this.songService = songService;\n      this.themeService = themeService;\n    }\n    ngOnInit() {\n      this.route.paramMap.subscribe(params => {\n        const emotionParam = params.get('emotion');\n        if (emotionParam && this.themeService.moods.includes(emotionParam)) {\n          this.emotion = emotionParam;\n          this.themeService.setMood(this.emotion);\n          this.loadSongs();\n        } else {\n          this.router.navigate(['/']);\n        }\n      });\n    }\n    loadSongs() {\n      this.songService.getSongsByEmotion(this.emotion).subscribe(songs => this.songs = songs);\n    }\n    playSong(song) {\n      if (this.audio) {\n        this.audio.pause();\n        this.audio.currentTime = 0;\n      }\n      this.audio = new Audio(song.src);\n      this.audio.addEventListener('loadedmetadata', () => {\n        this.duration = this.audio?.duration || 0;\n      });\n      this.audio.addEventListener('timeupdate', () => {\n        this.currentTime = this.audio?.currentTime || 0;\n      });\n      this.audio.addEventListener('ended', () => {\n        this.nextSong();\n      });\n      this.audio.play();\n      this.isPlaying = true;\n      this.currentSong = song;\n    }\n    togglePlay() {\n      if (this.audio) {\n        if (this.isPlaying) {\n          this.audio.pause();\n          this.isPlaying = false;\n        } else {\n          this.audio.play();\n          this.isPlaying = true;\n        }\n      }\n    }\n    toggleMute() {\n      if (this.audio) {\n        this.audio.muted = !this.audio.muted;\n        this.isMuted = this.audio.muted;\n      }\n    }\n    seek(event) {\n      if (this.audio) {\n        const seekTime = Number(event.target.value);\n        this.audio.currentTime = seekTime;\n        this.currentTime = seekTime;\n      }\n    }\n    formatTime(seconds) {\n      const minutes = Math.floor(seconds / 60);\n      const remainingSeconds = Math.floor(seconds % 60);\n      return `${minutes}:${remainingSeconds.toString().padStart(2, '0')}`;\n    }\n    nextSong() {\n      if (this.currentSongIndex < this.songs.length - 1) {\n        this.currentSongIndex++;\n        this.playSong(this.songs[this.currentSongIndex]);\n      }\n    }\n    previousSong() {\n      if (this.currentSongIndex > 0) {\n        this.currentSongIndex--;\n        this.playSong(this.songs[this.currentSongIndex]);\n      }\n    }\n    trackByFn(index, item) {\n      return item._id;\n    }\n    static ɵfac = function MoodComponent_Factory(__ngFactoryType__) {\n      return new (__ngFactoryType__ || MoodComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.SongService), i0.ɵɵdirectiveInject(i3.ThemeService));\n    };\n    static ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: MoodComponent,\n      selectors: [[\"app-mood\"]],\n      decls: 29,\n      vars: 7,\n      consts: [[1, \"mood-main\"], [1, \"container\"], [1, \"mood-hero\"], [1, \"mood-info\"], [1, \"emoji\"], [\"routerLink\", \"/\", 1, \"back-link\"], [1, \"mood-player\"], [1, \"songs-grid\"], [\"class\", \"song-card\", 3, \"click\", 4, \"ngFor\", \"ngForOf\", \"ngForTrackBy\"], [4, \"ngIf\"], [\"class\", \"audio-player\", 4, \"ngIf\"], [1, \"footer\"], [1, \"footer-nav\"], [\"href\", \"#\"], [1, \"song-card\", 3, \"click\"], [1, \"album-art\"], [3, \"src\", \"alt\"], [1, \"play-overlay\"], [1, \"song-info\"], [1, \"audio-player\"], [1, \"player-left\"], [1, \"player-album\", 3, \"src\", \"alt\"], [1, \"player-info\"], [1, \"player-center\"], [1, \"player-controls\"], [1, \"control-btn\", 3, \"click\"], [1, \"play-btn-large\", 3, \"click\"], [1, \"progress-bar-container\"], [1, \"time\"], [\"type\", \"range\", \"min\", \"0\", 1, \"progress-bar\", 3, \"input\", \"max\", \"value\"], [1, \"player-right\"], [1, \"volume-btn\", 3, \"click\"]],\n      template: function MoodComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelement(0, \"app-header\");\n          i0.ɵɵelementStart(1, \"main\", 0)(2, \"div\", 1)(3, \"section\", 2)(4, \"div\", 3)(5, \"span\", 4);\n          i0.ɵɵtext(6);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(7, \"h1\");\n          i0.ɵɵtext(8);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(9, \"p\");\n          i0.ɵɵtext(10);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(11, \"a\", 5);\n          i0.ɵɵtext(12, \"\\u2190 Back to Home\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(13, \"section\", 6)(14, \"div\", 7);\n          i0.ɵɵtemplate(15, MoodComponent_div_15_Template, 10, 4, \"div\", 8);\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(16, MoodComponent_p_16_Template, 2, 0, \"p\", 9);\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(17, MoodComponent_div_17_Template, 25, 10, \"div\", 10);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(18, \"footer\", 11)(19, \"div\", 1)(20, \"p\");\n          i0.ɵɵtext(21, \"\\u00A9 2025 Moodyo. All rights reserved.\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(22, \"nav\", 12)(23, \"a\", 13);\n          i0.ɵɵtext(24, \"About\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(25, \"a\", 13);\n          i0.ɵɵtext(26, \"Contact\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(27, \"a\", 13);\n          i0.ɵɵtext(28, \"Privacy\");\n          i0.ɵɵelementEnd()()()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(6);\n          i0.ɵɵtextInterpolate(ctx.themeService.getMoodData(ctx.emotion).emoji);\n          i0.ɵɵadvance(2);\n          i0.ɵɵtextInterpolate1(\"\", ctx.themeService.getMoodData(ctx.emotion).title, \" Mood\");\n          i0.ɵɵadvance(2);\n          i0.ɵɵtextInterpolate(ctx.themeService.getMoodData(ctx.emotion).description);\n          i0.ɵɵadvance(5);\n          i0.ɵɵproperty(\"ngForOf\", ctx.songs)(\"ngForTrackBy\", ctx.trackByFn);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.songs.length === 0);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.currentSong);\n        }\n      },\n      dependencies: [CommonModule, i4.NgForOf, i4.NgIf, HeaderComponent, RouterLink],\n      styles: [\".mood-main[_ngcontent-%COMP%]{margin-top:80px;flex:1}.mood-hero[_ngcontent-%COMP%]{padding:40px 20px;text-align:center;display:flex;justify-content:space-between;align-items:center}.mood-info[_ngcontent-%COMP%]   .emoji[_ngcontent-%COMP%]{font-size:4rem;display:block;margin-bottom:10px}.mood-info[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:700;margin-bottom:10px;background:linear-gradient(135deg,#667eea,#764ba2);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.mood-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.2rem;opacity:.8}.back-link[_ngcontent-%COMP%]{color:inherit;text-decoration:none;font-weight:500;padding:10px 20px;background:#ffffff1a;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border-radius:25px;transition:background .3s}.back-link[_ngcontent-%COMP%]:hover{background:#fff3}.mood-player[_ngcontent-%COMP%]{padding:40px 20px}.songs-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(250px,1fr));gap:30px;margin-bottom:40px}.song-card[_ngcontent-%COMP%]{background:#ffffff1a;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.2);border-radius:15px;overflow:hidden;cursor:pointer;transition:all .3s ease;position:relative}.song-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 10px 30px #0000004d}.album-art[_ngcontent-%COMP%]{position:relative;width:100%;height:200px;overflow:hidden}.album-art[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;transition:transform .3s}.song-card[_ngcontent-%COMP%]:hover   .album-art[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{transform:scale(1.05)}.play-overlay[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);font-size:3rem;color:#fff;background:#00000080;border-radius:50%;width:80px;height:80px;display:flex;align-items:center;justify-content:center;opacity:0;transition:opacity .3s}.song-card[_ngcontent-%COMP%]:hover   .play-overlay[_ngcontent-%COMP%]{opacity:1}.song-info[_ngcontent-%COMP%]{padding:20px}.song-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 10px;font-size:1.2rem;font-weight:600}.song-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;opacity:.8;font-size:1rem}.audio-player[_ngcontent-%COMP%]{position:fixed;bottom:0;left:0;right:0;background:#ffffff1a;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border-top:1px solid rgba(255,255,255,.2);padding:15px 20px;display:flex;justify-content:space-between;align-items:center;z-index:1000;height:80px}.player-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px}.player-album[_ngcontent-%COMP%]{width:60px;height:60px;border-radius:8px}.player-center[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;align-items:center;gap:10px}.player-controls[_ngcontent-%COMP%]{display:flex;gap:15px;align-items:center}.control-btn[_ngcontent-%COMP%]{background:none;border:none;color:inherit;font-size:1.5rem;cursor:pointer;padding:10px;border-radius:50%;transition:background .3s}.control-btn[_ngcontent-%COMP%]:hover{background:#ffffff1a}.play-btn-large[_ngcontent-%COMP%]{background:#1db954;border:none;color:#fff;font-size:2rem;padding:15px;border-radius:50%;cursor:pointer;width:60px;height:60px;display:flex;align-items:center;justify-content:center;transition:background .3s}.play-btn-large[_ngcontent-%COMP%]:hover{background:#1ed760}.progress-bar-container[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;width:100%;max-width:400px}.time[_ngcontent-%COMP%]{font-size:.9rem;color:#b3b3b3;min-width:35px}.progress-bar[_ngcontent-%COMP%]{flex:1;height:4px;background:#fff3;border-radius:2px;outline:none;cursor:pointer}.progress-bar[_ngcontent-%COMP%]::-webkit-slider-thumb{appearance:none;width:12px;height:12px;background:#1db954;border-radius:50%;cursor:pointer}.player-right[_ngcontent-%COMP%]{display:flex;align-items:center}.volume-btn[_ngcontent-%COMP%]{background:none;border:none;color:inherit;font-size:1.5rem;cursor:pointer;padding:10px;border-radius:50%;transition:background .3s}.volume-btn[_ngcontent-%COMP%]:hover{background:#ffffff1a}.player-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px}.player-info[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:8px}.player-info[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 5px;font-size:1rem;font-weight:600}.player-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:.9rem;opacity:.8}.player-controls[_ngcontent-%COMP%]{display:flex;gap:15px}.player-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:none;border:none;color:inherit;font-size:1.5rem;cursor:pointer;padding:10px;border-radius:50%;transition:background .3s}.player-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#ffffff1a}.play-btn[_ngcontent-%COMP%]{background:#fff3;width:50px;height:50px}.footer[_ngcontent-%COMP%]{background:#ffffff0d;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border-top:1px solid rgba(255,255,255,.2);padding:30px 0;margin-top:auto}.footer[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;max-width:1200px;margin:0 auto;padding:0 20px}.footer-nav[_ngcontent-%COMP%]{display:flex;gap:20px}.footer-nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:inherit;text-decoration:none;opacity:.8;transition:opacity .3s}.footer-nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{opacity:1}@media (max-width: 768px){.mood-hero[_ngcontent-%COMP%]{flex-direction:column;gap:20px}.mood-info[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem}.songs-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:20px}.audio-player[_ngcontent-%COMP%]{padding:10px;flex-direction:column;gap:10px}.player-info[_ngcontent-%COMP%]{flex:1}.player-controls[_ngcontent-%COMP%]{justify-content:center}.footer[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{flex-direction:column;gap:20px}}\"]\n    });\n  }\n  return MoodComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}